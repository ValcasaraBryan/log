#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Get version from package.json
version=$(node -p "require('./package.json').version")

# Try to create version tag
if git tag "v$version" 2>/dev/null; then
    echo "Created version tag v$version"
else
    echo "Version tag v$version already exists"
fi

# Delete existing latest tag if it exists
if git rev-parse -q --verify refs/tags/latest >/dev/null; then
    git tag -d "latest"
    git push origin :refs/tags/latest
fi

# Create new latest tag
git tag "latest"

# Force push the tags
git push --tags

echo "Successfully created and pushed tags: v$version and latest" 
